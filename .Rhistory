# Draw the same chart, but in a polar coordinate system. It's a Coxcomb chart!
## Facets
# Take the scatter plot of price by carat data (colored by clarity) and add
# _facets_ based on the diamond's `color`
## Saving Plots
# Use the `ggsave()` function to save the current (recent) plot to disk.
# Name the output file "my-plot.png".
# Make sure you've set the working directory!!
# Exercise 2: advanced ggplot2 practice
# Install and load the `ggplot2` package
#install.packages('ggplot2')
library("ggplot2")
# For this exercise you will again be working with the `diamonds` data set.
# Use `?diamonds` to review details about this data set
#?diamonds
## Position Adjustments
# Draw a column (bar) chart of diamonds cuts by price, with each bar filled by
# clarity. You should see a _stacked_ bar chart.
ggplot(data = diamonds) +
geom_col(mapping = aes(x = cut, y = price, fill = clarity))
# Draw the same chart again, but with each element positioned to "fill" the y axis
ggplot(data = diamonds) +
geom_col(mapping = aes(x = cut, y = price, fill = clarity), position = "fill")
# Draw the same chart again, but with each element positioned to "dodge" each other
ggplot(data = diamonds) +
geom_col(mapping = aes(x = cut, y = price, fill = clarity), position = "dodge")
# Draw a plot with point geometry with the x-position mapped to `cut` and the
# y-position mapped to `clarity`
# This creates a "grid" grouping the points
ggplot(data = diamonds) +
geom_point(mapping = aes(x = cut, y = clarity))
# Use the "jitter" position adjustment to keep the points from all overlapping!
# (This works a little better with a sample of diamond data, such as from the
# previous exercise).
ggplot(data = diamonds) +
geom_point(mapping = aes(x = cut, y = clarity), position = "jitter")
## Scales
# Draw a "boxplot" (with `geom_boxplot`) for the diamond's price (y) by color (x)
# This has a lot of outliers, making it harder to read. To fix this, draw the
# same plot but with a _logarithmic_ scale for the y axis.
# For another version, draw the same plot but with `violin` geometry instead of
# `boxplot` geometry!
# How does the logarithmic scale change the data presentation?
# Another interesting plot: draw a plot of the diamonds price (y) by carat (x),
# using a heatmap of 2d bins (geom_bin2d)
# What happens when you make the x and y channels scale logarithmically?
# Draw a scatter plot for the diamonds price (y) by carat (x). Color each point
# by the clarity (Remember, this will take a while. Use a sample of the diamonds
# for faster results)
# Change the color of the previous plot using a ColorBrewer scale of your choice.
# What looks nice?
## Coordinate Systems
# Draw a bar chart with x-position and fill color BOTH mapped to cut
# For best results, SET the `width` of the geometry to be 1 (fill plot, no space
# between)
# TIP: You can save the plot to a variable for easier modifications
# Draw the same chart, but with the coordinate system flipped
# Draw the same chart, but in a polar coordinate system. It's a Coxcomb chart!
## Facets
# Take the scatter plot of price by carat data (colored by clarity) and add
# _facets_ based on the diamond's `color`
## Saving Plots
# Use the `ggsave()` function to save the current (recent) plot to disk.
# Name the output file "my-plot.png".
# Make sure you've set the working directory!!
library("dplyr")
crime_data <- read.csv("crime_data.csv", stringsAsFactors = FALSE)
rain_data <- read.csv("seattle_rain.csv", stringsAsFactors = FALSE)
rain_data <- rain_data %>%
mutate(date = as.Date(DATE, "%Y-%m-%d"), rain = RAIN)
crime_data_with_weather <- crime_data %>%
mutate(date = as.Date(Reported.Date, "%Y-%m-%d")) %>%
inner_join(rain_data, by = "date") %>%
mutate(subcategory = Crime.Subcategory,
description = Primary.Offense.Description,
neighborhood = Neighborhood)
#select(date, subcategory, neighborhood, rain, PRCP, TMAX, TMIN)
# bens table didn't load
write.csv(crime_data_with_weather, "trimmed_data.csv", row.names = F)
# returns most recent crimes with n being the number of crimes
get_recent_crimes <- function(num) {
recent = tail(crime_data_with_weather, n = num)
return(recent)
}
crime_data_with_weather <- read.csv("trimmed_data.csv", stringsAsFactors = FALSE)
View(crime_data_with_weather)
#
# 1. What crime is the least likely to occur when it is raining?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
least_crime_dis <- least_crime %>% filter(n == min(n))
#   ###### This question can help determine the effect that rain has on a certain crime
#   2. What crime rate is effected the most by rain?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
no_rain_crime <- crime_data_with_weather %>% filter(rain == "FALSE") %>% select(subcategory)
no_least_crime <- no_rain_crime %>% count(subcategory)
combined_data <- full_join(least_crime, no_least_crime,"subcategory")
most_effected <- combined_data %>% mutate(most = 100*(n.x - n.y)/n.y)
most_effected <- most_effected %>% filter(most == max(most))
names(most_effected)[2] <- "Raining"
names(most_effected)[3] <- "Not Raining"
names(most_effected)[4] <- "Percent Increase"
View(most_effected)
#   ###### This can help law enforcement determine what they should devote resources towards when it is raining.
#   3. What neighboorhood has the largest percentage increase in crime when it does not rain.
neighborhood_crime <- crime_data_with_weather %>% select(neighborhood,rain)
neighborhood_crime_rain <- neighborhood_crime %>% filter(rain == TRUE) %>% select(neighborhood)
neighborhood_crime_no_rain <- neighborhood_crime %>% filter(rain == FALSE) %>% select(neighborhood)
neighborhood_rain_count <- neighborhood_crime_rain %>% count(neighborhood)
names(neighborhood_rain_count)[2] <- "Raining"
neighborhood_no_rain_count <- neighborhood_crime_no_rain %>% count(neighborhood)
names(neighborhood_no_rain_count)[2] <- "Not_Raining"
joined_data <- neighborhood_rain_count %>%
inner_join(neighborhood_no_rain_count, by = "neighborhood") %>%
mutate(percentage = 100*(Not_Raining-Raining)/Not_Raining) %>%
filter(percentage == max(percentage))
View(joined_data)
# ###### This will help understand what characteristics of a neighborhood leads to more crime
# 4. What crime is commited the most when the temperature is below 32 degrees? Above 75? Is it the same crime, did the temperature effect the most common crime?
#   ###### This can help law enforcement determine what they should devote resources to when it is warm or cold.
#   5. what season has the most crime? is it consistent from year to year?
#   Done!!!!
#   ###### This can help law enforcement predict trends in crime based on the weather and historical data
#   6. What crime rate has the largest increase when it rains in the University district.
# ###### This can help predict crime trends in the UDistrict based on the weather
# 7. What is the most common crime for Seattle the most common crime in every neighboorhood?
#Done!!!!
library("dplyr")
crime_data <- read.csv("crime_data.csv", stringsAsFactors = FALSE)
rain_data <- read.csv("seattle_rain.csv", stringsAsFactors = FALSE)
rain_data <- rain_data %>%
mutate(date = as.Date(DATE, "%Y-%m-%d"), rain = RAIN)
crime_data_with_weather <- crime_data %>%
mutate(date = as.Date(Reported.Date, "%Y-%m-%d")) %>%
inner_join(rain_data, by = "date") %>%
mutate(subcategory = Crime.Subcategory,
description = Primary.Offense.Description,
neighborhood = Neighborhood) %>%
select(date, subcategory, neighborhood, rain, PRCP, TMAX, TMIN)
# bens table didn't load
write.csv(crime_data_with_weather, "trimmed_data.csv", row.names = F)
# returns most recent crimes with n being the number of crimes
get_recent_crimes <- function(num) {
recent = tail(crime_data_with_weather, n = num)
return(recent)
}
crime_data_with_weather <- read.csv("trimmed_data.csv", stringsAsFactors = FALSE)
View(crime_data_with_weather)
#
# 1. What crime is the least likely to occur when it is raining?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
least_crime_dis <- least_crime %>% filter(n == min(n))
#   ###### This question can help determine the effect that rain has on a certain crime
#   2. What crime rate is effected the most by rain?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
no_rain_crime <- crime_data_with_weather %>% filter(rain == "FALSE") %>% select(subcategory)
no_least_crime <- no_rain_crime %>% count(subcategory)
combined_data <- full_join(least_crime, no_least_crime,"subcategory")
most_effected <- combined_data %>% mutate(most = 100*(n.x - n.y)/n.y)
most_effected <- most_effected %>% filter(most == max(most))
names(most_effected)[2] <- "Raining"
names(most_effected)[3] <- "Not Raining"
names(most_effected)[4] <- "Percent Increase"
View(most_effected)
#   ###### This can help law enforcement determine what they should devote resources towards when it is raining.
#   3. What neighboorhood has the largest percentage increase in crime when it does not rain.
neighborhood_crime <- crime_data_with_weather %>% select(neighborhood,rain)
neighborhood_crime_rain <- neighborhood_crime %>% filter(rain == TRUE) %>% select(neighborhood)
neighborhood_crime_no_rain <- neighborhood_crime %>% filter(rain == FALSE) %>% select(neighborhood)
neighborhood_rain_count <- neighborhood_crime_rain %>% count(neighborhood)
names(neighborhood_rain_count)[2] <- "Raining"
neighborhood_no_rain_count <- neighborhood_crime_no_rain %>% count(neighborhood)
names(neighborhood_no_rain_count)[2] <- "Not_Raining"
joined_data <- neighborhood_rain_count %>%
inner_join(neighborhood_no_rain_count, by = "neighborhood") %>%
mutate(percentage = 100*(Not_Raining-Raining)/Not_Raining) %>%
filter(percentage == max(percentage))
View(joined_data)
# ###### This will help understand what characteristics of a neighborhood leads to more crime
# 4. What crime is commited the most when the temperature is below 32 degrees? Above 75? Is it the same crime, did the temperature effect the most common crime?
#   ###### This can help law enforcement determine what they should devote resources to when it is warm or cold.
#   5. what season has the most crime? is it consistent from year to year?
#   Done!!!!
#   ###### This can help law enforcement predict trends in crime based on the weather and historical data
#   6. What crime rate has the largest increase when it rains in the University district.
# ###### This can help predict crime trends in the UDistrict based on the weather
# 7. What is the most common crime for Seattle the most common crime in every neighboorhood?
#Done!!!!
clear
library("dplyr")
crime_data <- read.csv("crime_data.csv", stringsAsFactors = FALSE)
rain_data <- read.csv("seattle_rain.csv", stringsAsFactors = FALSE)
rain_data <- rain_data %>%
mutate(date = as.Date(DATE, "%Y-%m-%d"), rain = RAIN)
crime_data_with_weather <- crime_data %>%
mutate(date = as.Date(Reported.Date, "%Y-%m-%d")) %>%
inner_join(rain_data, by = "date") %>%
mutate(subcategory = Crime.Subcategory,
description = Primary.Offense.Description,
neighborhood = Neighborhood) %>%
select(date, subcategory, neighborhood, rain, PRCP, TMAX, TMIN)
# bens table didn't load
write.csv(crime_data_with_weather, "trimmed_data.csv", row.names = F)
# returns most recent crimes with n being the number of crimes
get_recent_crimes <- function(num) {
recent = tail(crime_data_with_weather, n = num)
return(recent)
}
crime_data_with_weather <- read.csv("trimmed_data.csv", stringsAsFactors = FALSE)
View(crime_data_with_weather)
#
# 1. What crime is the least likely to occur when it is raining?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
least_crime_dis <- least_crime %>% filter(n == min(n))
#   ###### This question can help determine the effect that rain has on a certain crime
#   2. What crime rate is effected the most by rain?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
no_rain_crime <- crime_data_with_weather %>% filter(rain == "FALSE") %>% select(subcategory)
no_least_crime <- no_rain_crime %>% count(subcategory)
combined_data <- full_join(least_crime, no_least_crime,"subcategory")
most_effected <- combined_data %>% mutate(most = 100*(n.x - n.y)/n.y)
most_effected <- most_effected %>% filter(most == max(most))
names(most_effected)[2] <- "Raining"
names(most_effected)[3] <- "Not Raining"
names(most_effected)[4] <- "Percent Increase"
View(most_effected)
#   ###### This can help law enforcement determine what they should devote resources towards when it is raining.
#   3. What neighboorhood has the largest percentage increase in crime when it does not rain.
neighborhood_crime <- crime_data_with_weather %>% select(neighborhood,rain)
neighborhood_crime_rain <- neighborhood_crime %>% filter(rain == TRUE) %>% select(neighborhood)
neighborhood_crime_no_rain <- neighborhood_crime %>% filter(rain == FALSE) %>% select(neighborhood)
neighborhood_rain_count <- neighborhood_crime_rain %>% count(neighborhood)
names(neighborhood_rain_count)[2] <- "Raining"
neighborhood_no_rain_count <- neighborhood_crime_no_rain %>% count(neighborhood)
names(neighborhood_no_rain_count)[2] <- "Not_Raining"
joined_data <- neighborhood_rain_count %>%
inner_join(neighborhood_no_rain_count, by = "neighborhood") %>%
mutate(percentage = 100*(Not_Raining-Raining)/Not_Raining) %>%
filter(percentage == max(percentage))
View(joined_data)
# ###### This will help understand what characteristics of a neighborhood leads to more crime
# 4. What crime is commited the most when the temperature is below 32 degrees? Above 75? Is it the same crime, did the temperature effect the most common crime?
#   ###### This can help law enforcement determine what they should devote resources to when it is warm or cold.
#   5. what season has the most crime? is it consistent from year to year?
#   Done!!!!
#   ###### This can help law enforcement predict trends in crime based on the weather and historical data
#   6. What crime rate has the largest increase when it rains in the University district.
# ###### This can help predict crime trends in the UDistrict based on the weather
# 7. What is the most common crime for Seattle the most common crime in every neighboorhood?
#Done!!!!
setwd("~/Programming/INFO201/its_raining_crime")
library("dplyr")
crime_data <- read.csv("crime_data.csv", stringsAsFactors = FALSE)
rain_data <- read.csv("seattle_rain.csv", stringsAsFactors = FALSE)
rain_data <- rain_data %>%
mutate(date = as.Date(DATE, "%Y-%m-%d"), rain = RAIN)
crime_data_with_weather <- crime_data %>%
mutate(date = as.Date(Reported.Date, "%Y-%m-%d")) %>%
inner_join(rain_data, by = "date") %>%
mutate(subcategory = Crime.Subcategory,
description = Primary.Offense.Description,
neighborhood = Neighborhood) %>%
select(date, subcategory, neighborhood, rain, PRCP, TMAX, TMIN)
# bens table didn't load
write.csv(crime_data_with_weather, "trimmed_data.csv", row.names = F)
# returns most recent crimes with n being the number of crimes
get_recent_crimes <- function(num) {
recent = tail(crime_data_with_weather, n = num)
return(recent)
}
crime_data_with_weather <- read.csv("trimmed_data.csv", stringsAsFactors = FALSE)
View(crime_data_with_weather)
#
# 1. What crime is the least likely to occur when it is raining?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
least_crime_dis <- least_crime %>% filter(n == min(n))
#   ###### This question can help determine the effect that rain has on a certain crime
#   2. What crime rate is effected the most by rain?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
no_rain_crime <- crime_data_with_weather %>% filter(rain == "FALSE") %>% select(subcategory)
no_least_crime <- no_rain_crime %>% count(subcategory)
combined_data <- full_join(least_crime, no_least_crime,"subcategory")
most_effected <- combined_data %>% mutate(most = 100*(n.x - n.y)/n.y)
most_effected <- most_effected %>% filter(most == max(most))
names(most_effected)[2] <- "Raining"
names(most_effected)[3] <- "Not Raining"
names(most_effected)[4] <- "Percent Increase"
View(most_effected)
#   ###### This can help law enforcement determine what they should devote resources towards when it is raining.
#   3. What neighboorhood has the largest percentage increase in crime when it does not rain.
neighborhood_crime <- crime_data_with_weather %>% select(neighborhood,rain)
neighborhood_crime_rain <- neighborhood_crime %>% filter(rain == TRUE) %>% select(neighborhood)
neighborhood_crime_no_rain <- neighborhood_crime %>% filter(rain == FALSE) %>% select(neighborhood)
neighborhood_rain_count <- neighborhood_crime_rain %>% count(neighborhood)
names(neighborhood_rain_count)[2] <- "Raining"
neighborhood_no_rain_count <- neighborhood_crime_no_rain %>% count(neighborhood)
names(neighborhood_no_rain_count)[2] <- "Not_Raining"
joined_data <- neighborhood_rain_count %>%
inner_join(neighborhood_no_rain_count, by = "neighborhood") %>%
mutate(percentage = 100*(Not_Raining-Raining)/Not_Raining) %>%
filter(percentage == max(percentage))
View(joined_data)
# ###### This will help understand what characteristics of a neighborhood leads to more crime
# 4. What crime is commited the most when the temperature is below 32 degrees? Above 75? Is it the same crime, did the temperature effect the most common crime?
#   ###### This can help law enforcement determine what they should devote resources to when it is warm or cold.
#   5. what season has the most crime? is it consistent from year to year?
#   Done!!!!
#   ###### This can help law enforcement predict trends in crime based on the weather and historical data
#   6. What crime rate has the largest increase when it rains in the University district.
# ###### This can help predict crime trends in the UDistrict based on the weather
# 7. What is the most common crime for Seattle the most common crime in every neighboorhood?
#Done!!!!
View(crime_data)
library("dplyr")
crime_data <- read.csv("crime_data.csv", stringsAsFactors = FALSE)
rain_data <- read.csv("seattle_rain.csv", stringsAsFactors = FALSE)
rain_data <- rain_data %>%
mutate(date = as.Date(DATE, "%Y-%m-%d"), rain = RAIN)
crime_data_with_weather <- crime_data %>%
mutate(date = as.Date(Reported.Date, "%Y-%m-%d")) %>%
select(date, subcategory, neighborhood) %>%
inner_join(rain_data, by = "date") %>%
mutate(subcategory = Crime.Subcategory,
description = Primary.Offense.Description,
neighborhood = Neighborhood) %>%
select(date, subcategory, neighborhood, rain, PRCP, TMAX, TMIN)
# bens table didn't load
write.csv(crime_data_with_weather, "trimmed_data.csv", row.names = F)
# returns most recent crimes with n being the number of crimes
get_recent_crimes <- function(num) {
recent = tail(crime_data_with_weather, n = num)
return(recent)
}
crime_data_with_weather <- read.csv("trimmed_data.csv", stringsAsFactors = FALSE)
View(crime_data_with_weather)
#
# 1. What crime is the least likely to occur when it is raining?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
least_crime_dis <- least_crime %>% filter(n == min(n))
#   ###### This question can help determine the effect that rain has on a certain crime
#   2. What crime rate is effected the most by rain?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
no_rain_crime <- crime_data_with_weather %>% filter(rain == "FALSE") %>% select(subcategory)
no_least_crime <- no_rain_crime %>% count(subcategory)
combined_data <- full_join(least_crime, no_least_crime,"subcategory")
most_effected <- combined_data %>% mutate(most = 100*(n.x - n.y)/n.y)
most_effected <- most_effected %>% filter(most == max(most))
names(most_effected)[2] <- "Raining"
names(most_effected)[3] <- "Not Raining"
names(most_effected)[4] <- "Percent Increase"
View(most_effected)
#   ###### This can help law enforcement determine what they should devote resources towards when it is raining.
#   3. What neighboorhood has the largest percentage increase in crime when it does not rain.
neighborhood_crime <- crime_data_with_weather %>% select(neighborhood,rain)
neighborhood_crime_rain <- neighborhood_crime %>% filter(rain == TRUE) %>% select(neighborhood)
neighborhood_crime_no_rain <- neighborhood_crime %>% filter(rain == FALSE) %>% select(neighborhood)
neighborhood_rain_count <- neighborhood_crime_rain %>% count(neighborhood)
names(neighborhood_rain_count)[2] <- "Raining"
neighborhood_no_rain_count <- neighborhood_crime_no_rain %>% count(neighborhood)
names(neighborhood_no_rain_count)[2] <- "Not_Raining"
joined_data <- neighborhood_rain_count %>%
inner_join(neighborhood_no_rain_count, by = "neighborhood") %>%
mutate(percentage = 100*(Not_Raining-Raining)/Not_Raining) %>%
filter(percentage == max(percentage))
View(joined_data)
# ###### This will help understand what characteristics of a neighborhood leads to more crime
# 4. What crime is commited the most when the temperature is below 32 degrees? Above 75? Is it the same crime, did the temperature effect the most common crime?
#   ###### This can help law enforcement determine what they should devote resources to when it is warm or cold.
#   5. what season has the most crime? is it consistent from year to year?
#   Done!!!!
#   ###### This can help law enforcement predict trends in crime based on the weather and historical data
#   6. What crime rate has the largest increase when it rains in the University district.
# ###### This can help predict crime trends in the UDistrict based on the weather
# 7. What is the most common crime for Seattle the most common crime in every neighboorhood?
#Done!!!!
library("dplyr")
crime_data <- read.csv("crime_data.csv", stringsAsFactors = FALSE)
rain_data <- read.csv("seattle_rain.csv", stringsAsFactors = FALSE)
rain_data <- rain_data %>%
mutate(date = as.Date(DATE, "%Y-%m-%d"), rain = RAIN)
crime_data_with_weather <- crime_data %>%
mutate(date = as.Date(Reported.Date, "%Y-%m-%d")) %>%
select(date, Crime.Subcategory, Neighborhood) %>%
inner_join(rain_data, by = "date") %>%
mutate(subcategory = Crime.Subcategory,
description = Primary.Offense.Description,
neighborhood = Neighborhood) %>%
select(date, subcategory, neighborhood, rain, PRCP, TMAX, TMIN)
# bens table didn't load
write.csv(crime_data_with_weather, "trimmed_data.csv", row.names = F)
# returns most recent crimes with n being the number of crimes
get_recent_crimes <- function(num) {
recent = tail(crime_data_with_weather, n = num)
return(recent)
}
crime_data_with_weather <- read.csv("trimmed_data.csv", stringsAsFactors = FALSE)
View(crime_data_with_weather)
#
# 1. What crime is the least likely to occur when it is raining?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
least_crime_dis <- least_crime %>% filter(n == min(n))
#   ###### This question can help determine the effect that rain has on a certain crime
#   2. What crime rate is effected the most by rain?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
no_rain_crime <- crime_data_with_weather %>% filter(rain == "FALSE") %>% select(subcategory)
no_least_crime <- no_rain_crime %>% count(subcategory)
combined_data <- full_join(least_crime, no_least_crime,"subcategory")
most_effected <- combined_data %>% mutate(most = 100*(n.x - n.y)/n.y)
most_effected <- most_effected %>% filter(most == max(most))
names(most_effected)[2] <- "Raining"
names(most_effected)[3] <- "Not Raining"
names(most_effected)[4] <- "Percent Increase"
View(most_effected)
#   ###### This can help law enforcement determine what they should devote resources towards when it is raining.
#   3. What neighboorhood has the largest percentage increase in crime when it does not rain.
neighborhood_crime <- crime_data_with_weather %>% select(neighborhood,rain)
neighborhood_crime_rain <- neighborhood_crime %>% filter(rain == TRUE) %>% select(neighborhood)
neighborhood_crime_no_rain <- neighborhood_crime %>% filter(rain == FALSE) %>% select(neighborhood)
neighborhood_rain_count <- neighborhood_crime_rain %>% count(neighborhood)
names(neighborhood_rain_count)[2] <- "Raining"
neighborhood_no_rain_count <- neighborhood_crime_no_rain %>% count(neighborhood)
names(neighborhood_no_rain_count)[2] <- "Not_Raining"
joined_data <- neighborhood_rain_count %>%
inner_join(neighborhood_no_rain_count, by = "neighborhood") %>%
mutate(percentage = 100*(Not_Raining-Raining)/Not_Raining) %>%
filter(percentage == max(percentage))
View(joined_data)
# ###### This will help understand what characteristics of a neighborhood leads to more crime
# 4. What crime is commited the most when the temperature is below 32 degrees? Above 75? Is it the same crime, did the temperature effect the most common crime?
#   ###### This can help law enforcement determine what they should devote resources to when it is warm or cold.
#   5. what season has the most crime? is it consistent from year to year?
#   Done!!!!
#   ###### This can help law enforcement predict trends in crime based on the weather and historical data
#   6. What crime rate has the largest increase when it rains in the University district.
# ###### This can help predict crime trends in the UDistrict based on the weather
# 7. What is the most common crime for Seattle the most common crime in every neighboorhood?
#Done!!!!
library("dplyr")
crime_data <- read.csv("crime_data.csv", stringsAsFactors = FALSE)
rain_data <- read.csv("seattle_rain.csv", stringsAsFactors = FALSE)
rain_data <- rain_data %>%
mutate(date = as.Date(DATE, "%Y-%m-%d"), rain = RAIN)
crime_data_with_weather <- crime_data %>%
mutate(date = as.Date(Reported.Date, "%Y-%m-%d")) %>%
#select(date, Crime.Subcategory, Neighborhood) %>%
left_join(rain_data, by = "date") %>%
mutate(subcategory = Crime.Subcategory,
description = Primary.Offense.Description,
neighborhood = Neighborhood) %>%
select(date, subcategory, neighborhood, rain, PRCP, TMAX, TMIN)
# bens table didn't load
write.csv(crime_data_with_weather, "trimmed_data.csv", row.names = F)
# returns most recent crimes with n being the number of crimes
get_recent_crimes <- function(num) {
recent = tail(crime_data_with_weather, n = num)
return(recent)
}
crime_data_with_weather <- read.csv("trimmed_data.csv", stringsAsFactors = FALSE)
View(crime_data_with_weather)
#
# 1. What crime is the least likely to occur when it is raining?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
least_crime_dis <- least_crime %>% filter(n == min(n))
#   ###### This question can help determine the effect that rain has on a certain crime
#   2. What crime rate is effected the most by rain?
rain_crime <- crime_data_with_weather %>% filter(rain == "TRUE") %>% select(subcategory)
least_crime <- rain_crime %>% count(subcategory)
no_rain_crime <- crime_data_with_weather %>% filter(rain == "FALSE") %>% select(subcategory)
no_least_crime <- no_rain_crime %>% count(subcategory)
combined_data <- full_join(least_crime, no_least_crime,"subcategory")
most_effected <- combined_data %>% mutate(most = 100*(n.x - n.y)/n.y)
most_effected <- most_effected %>% filter(most == max(most))
names(most_effected)[2] <- "Raining"
names(most_effected)[3] <- "Not Raining"
names(most_effected)[4] <- "Percent Increase"
View(most_effected)
#   ###### This can help law enforcement determine what they should devote resources towards when it is raining.
#   3. What neighboorhood has the largest percentage increase in crime when it does not rain.
neighborhood_crime <- crime_data_with_weather %>% select(neighborhood,rain)
neighborhood_crime_rain <- neighborhood_crime %>% filter(rain == TRUE) %>% select(neighborhood)
neighborhood_crime_no_rain <- neighborhood_crime %>% filter(rain == FALSE) %>% select(neighborhood)
neighborhood_rain_count <- neighborhood_crime_rain %>% count(neighborhood)
names(neighborhood_rain_count)[2] <- "Raining"
neighborhood_no_rain_count <- neighborhood_crime_no_rain %>% count(neighborhood)
names(neighborhood_no_rain_count)[2] <- "Not_Raining"
joined_data <- neighborhood_rain_count %>%
inner_join(neighborhood_no_rain_count, by = "neighborhood") %>%
mutate(percentage = 100*(Not_Raining-Raining)/Not_Raining) %>%
filter(percentage == max(percentage))
View(joined_data)
# ###### This will help understand what characteristics of a neighborhood leads to more crime
# 4. What crime is commited the most when the temperature is below 32 degrees? Above 75? Is it the same crime, did the temperature effect the most common crime?
#   ###### This can help law enforcement determine what they should devote resources to when it is warm or cold.
#   5. what season has the most crime? is it consistent from year to year?
#   Done!!!!
#   ###### This can help law enforcement predict trends in crime based on the weather and historical data
#   6. What crime rate has the largest increase when it rains in the University district.
# ###### This can help predict crime trends in the UDistrict based on the weather
# 7. What is the most common crime for Seattle the most common crime in every neighboorhood?
#Done!!!!
